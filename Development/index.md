# 実践的フリーオープンソースソフトウェア開発概論

この文書は @usagi が開講する講座で必要に応じて参照する副教材として用意したものです。

----

## フリーとは何か

"Free Software"は「自由な」ソフトウェアです。
金銭的に無償で使えるなどと言う意味ではありません。

- [GNU](http://www.gnu.org/)
    - [自由ソフトウェアとは？](http://www.gnu.org/philosophy/free-sw.ja.html)

これは[フリーソフトウェア財団](http://ja.wikipedia.org/wiki/%E3%83%95%E3%83%AA%E3%83%BC%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E8%B2%A1%E5%9B%A3)を率いる[リチャード・ストールマン](http://ja.wikipedia.org/wiki/%E3%83%AA%E3%83%81%E3%83%A3%E3%83%BC%E3%83%89%E3%83%BB%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%83%9E%E3%83%B3)氏が提唱し、実際に世界中の多くのソフトウェアでこれに基づくライセンスが採用されています。

彼らに言わせれば"Free Software"とはこの精神に則ったもので、具体的に言えば[GNU General Public License](http://www.gnu.org/licenses/gpl.html)や[GNU Free Documentation License](http://www.gnu.org/licenses/fdl.html)を採用するソフトウェアとも言えます。

この概念はしばしば[コピーレフト](http://www.gnu.org/copyleft/copyleft.ja.html)とも呼ばれます。
この言葉もリチャード・ストールマン氏が作り出した表現です。

## オープンソースとは何か

リチャード・ストールマン氏の提唱したフリーソフトウェアとその具体的なライセンスであるGPLやGFDLには、「自由であり続ける事を保証しなければならない」という「不自由」を伴います。

これは著作権を逆手に取り上手く応用しているが、考え方によっては「完全な自由」でもあり、または「不完全な自由」とも捉えられます。

そこで、コピーレフトの様な強い、しばしばそれは感染性とまで言われるライセンスは採用せずに、単にソフトウェアのソースコードを一般に公開し自由に改変して使用できる様にしただけの配布形態を取るソフトウェアもあります。

もちろん先に挙げた"Free Software"も「オープンソースソフトウェア」という概念の元では内包されており、そもそも人類の叡智としてのソフトウェアに自由を齎したいという意思においては両者は共通しています。

具体的には["修正BSD"](http://www.gnu.org/licenses/license-list.ja.html#ModifiedBSD)、["MIT"](http://www.gnu.org/licenses/license-list.ja.html#Expat)、["CC-BY"](http://www.gnu.org/licenses/license-list.ja.html#ccby)、などのライセンス形態がオープンであるがコピーレフトではないライセンスとして、これらも広く使われています。

当然これら単にオープンなだけのライセンスでは、改変により容易に自由なソフトウェアから不自由なソフトウェアを作り出せてしまいます。
それゆえ真の"Free Software"の推進者には（真に自由である事に対しては）「劣った」ライセンスであると考えられる事もあります。
然し乍らGPLやGFDLは改変物の再配布に伴い必要なコスト（原作物の同梱であったり、改変の明示、権利者の列挙、ライセンス文書の添付など）が要求される事もあり、それを嫌って単にオープンソースソフトウェアに甘んじる配布者もいます。

## 開発フロー

何事にもそうであるように、ソフトウェア開発にもよく知られた「段取り」があります。

「どこで」「なにを」「なぜ」「だれが」「どのように」「いつ」までにしたら良いのかがあらゆることの手順として挙げられますが、ソフトウェア開発でもそれらは何れも大切な要素です。

とは言え、もっとソフトウェアの開発フローに適した具体的な手順が先人たちによって幾つか提唱され、実際に使われています。

先ずは以下の資料など読んでソフトウェア開発の工程の基本概念を捉えてみましょう。

- [Tech Fun - 開発プロセスと開発標準化](http://techfun.cc/devbase/devbase2.html)
- [東京農工大学 - ソフトウェア開発プロセス ソフトウェア開発プロセスの概要と各種開発モデルの具体的な概念](http://www.tuat.ac.jp/~asiaprog/courses/project/lesson02/)
- [鹿児島大学 ソフトウェア工学 ソフトウェア工学特論 プロセスモデル](http://www.ics.kagoshima-u.ac.jp/edu/SoftwareEngineering/process-model.html)

ここで紹介されている「ウォーターフォール」は全てのソフトウェアの開発フローの基礎的な概念として重要です。
どの様な工程をどの様な順序で熟す必要があるのかイメージを掴んで置きましょう。

[「スパイラル」](http://ja.wikipedia.org/wiki/%E3%82%B9%E3%83%91%E3%82%A4%E3%83%A9%E3%83%AB%E3%83%A2%E3%83%87%E3%83%AB)、
[「反復」](http://ja.wikipedia.org/wiki/%E5%8F%8D%E5%BE%A9%E5%9E%8B%E9%96%8B%E7%99%BA)、
[「アジャイル」](http://ja.wikipedia.org/wiki/%E3%82%A2%E3%82%B8%E3%83%A3%E3%82%A4%E3%83%AB%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E9%96%8B%E7%99%BA)、
[「スクラム」](http://ja.wikipedia.org/wiki/%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0_(%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E9%96%8B%E7%99%BA)、
[「テスト駆動」](http://ja.wikipedia.org/wiki/%E3%83%86%E3%82%B9%E3%83%88%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA)
など何れの開発工程を考える上でも基礎的な開発工程の知識は必要不可欠です。

ソフトウェア開発のプロセス管理に比較的不慣れなら、先ずはウォーターフォールモデルを基本として実践してみると良いでしょう。

あまり知識や経験が伴わないうちはアジャイルやスクラムに挑戦するのはやや難しいはずです。
ソフトウェアの最初のリリースに上手く漕ぎ着けたなら、そこからは興味のある開発プロセスを試して見るのも良いでしょう。

## 要件定義

これもソフトウェア開発に限った事ではありませんが、プロジェクトを立ち上げたならば真っ先にやらなければならない事は要件の定義です。

開発フローで5W1Hの例えを出しましたが「なにを」「なぜ」作るのかをしっかりと定義するプロセスです。

プロジェクトの成果物を欲するクライアントと打ち合わせを行なったり、或いは自分たちがこのプロジェクトを成功させる事で何をしたいのか、先ずはビジョンを明確化しましょう。

この工程ではレベル付きの箇条書き、マインドマップ風の連想、即興のラフスケッチなどを行いながら企画会議を行うと良いでしょう。

この段階でも実装詳細まで考えられるに越したことはありませんが、「なにを」「なぜ」やりたいのかを明確化する事を優先し、技術的な詳細はそれらが明らかになるに連れ必要最小限議論に取り込めば良いでしょう。

ゲーム開発であれば簡単なゲームの画面なり状態なりの大まかな構成とその遷移、アニメーションであればシーンと登場人物のイメージから[絵コンテ](http://ja.wikipedia.org/wiki/%E7%B5%B5%E3%82%B3%E3%83%B3%E3%83%86)を作成したり。

但し、最初からあまり細かく考え過ぎると、他の部分が疎かになったり、そもそも後工程のスケジュールを圧迫したり、全体を調整したら不要な要素まで詳細に定義し過ぎてコストを無駄にしていたり、そうした事が生じる恐れがあります。
妄想は楽しいでしょうがほどほどにしましょう。

明確化し定義された要件は最後にテキストデータで箇条書きの資料を作成するなどしてまとめて置きましょう。

また、企画会議のメモやラフスケッチは捨てずに、開発資料として確実に保存、共有しましょう。紙に書いたなら文字が読み取れる分解能で写真を撮影してしまうのが簡単ですし、綺麗に電子化したければフラットヘッドスキャナーで読み取っても良いでしょう。

## 仕様

要件を整理できたならば具体的なソフトウェアを開発する為に要件から仕様を作りましょう。
ここで作成した仕様通りのものが完成すれば、結果的に要件を満たし、プロジェクトは成功します。

開発すべきソフトウェア、あるいはプロジェクト全体として、仕様を文書に整理する際は次のような事柄に気を付けると良いでしょう。

- 文書は「誰が」「何時」書いた「何についての」文書なのか分かるように作成
    - 文書は伝えるために作成するもの
    - 後で自分たちが見ても分かりやすく重宝する様に
- 企画の概要を簡潔に文書冒頭で述べる
    - 必要十分を簡潔に
    - 挿絵やキャッチコピーを入れても良い
- 要件定義
    - 実現すべき具体的な目的や対応すべき内容を定義
    - レベル付きの箇条書きを使っても良い
- 設計
    - UIがある場合はワイヤフレームで画面遷移図を作成
    - ライブラリーであればAPI仕様を作成
    - ソフト開発ではクラス図は必ず作成
    - データベースを使うならばER図も必ず作成
    - 複数の利用者・利用形態が関わる場合はユースケース図も作成
- 開発計画
    - 設計を基にその実装を「だれが」「いつまでに」やるのか
    - 担当者または機能ごとに「ガントチャート」形式に整理ると良い
        - ある仕事が終わるまで別の仕事をできないブロッキングには十分注意する
    - 計画はギリギリに入れ込まず、必ず定期的に予備日を設けて計画する事

## ツールを活用する

ソフトウェア開発には様々なツールを活用できます。活用しない手はありません。

先ずはオンラインサービスを幾つか紹介しましょう。

- Google
    - [Drive](https://drive.google.com/)
        - 仕様書等の文書作成と共有
        - プレゼンテーション資料の作成と共有
        - 実験データの簡易的な整理と共有
    - [Calendar](https://www.google.com/calendar/)
        - 個人・グループのスケジュール管理と共有
    - [Groups](https://groups.google.com/)
        - メーリングリスト（ディスカッションと議事録）
- [Ideone](http://ideone.com/)
    - 多種多様な処理系によるソースコード片の実行と共有
    - もちろん JavaScript 処理系にも対応
- [gist](https://gist.github.com/)
    - コード片の共有
    - GitHubの一部機能
- [Cacoo](https://cacoo.com/)
    - ワイヤーフレーム、フロー、クラス図等の作成と共有
- [SlideShare](http://www.slideshare.net/)
    - プレゼンテーション資料の共有
- [co-meeting](http://www.co-meeting.com/)
    - リアルタイム電子会議室
- [サイボウズLive](https://cybozulive.com/)
    - グループのスケジュール管理
- [SPACE ALC](http://www.alc.co.jp/)
    - 英語の文書を読む
    - 英語で文書を書く
- [DropBox](https://www.dropbox.com/)
    - 複数PC・スマフォ間のファイル自動共有
    - 特定ファイル・ディレクトリーの他人との共有
- [GitHub](https://github.com/)
    - ソフトウェアリポジトリー管理サービス
    - Gitと相性が良い
    - 開発者同士の活発な交流と開発を促進する環境
- [BitBucket](https://bitbucket.org/)
    - ソフトウェアリポジトリー管理サービス
    - Mercurialと相性が良い（Gitにも対応）
- [SourceForge](http://sourceforge.jp/)
    - ソフトウェアリポジトリー管理サービス
    - Subversionと相性が良い（他のVCSにも対応）
- [Travis](https://travis-ci.org/)
    - GitHubと連携できるオンライン継続的インテグレーションサービス
- [BuildHive](https://buildhive.cloudbees.com/)
    - GitHubと連携できるオンライン継続的インテグレーションサービス

どれも一度は触って置くと良いし、要件定義や仕様作成から早速使うと良いでしょう。

例えば、プロジェクトが発足したなら真っ先にGoogle Groupsでメーリングリストを整備して以後の連絡や議論を円滑にできるようにしたり、或いはco-meetingにグループを作って使い始めても良いでしょう。
Cacooでイメージを共有し合いながらワイヤーフレームやUML風の図を整理するのも良いアイデアです。
プレゼンテーション資料はGoogleDriveで作成すれば同時に複数のメンバーがリアルタイムに編集に参加できます。
出来上がった資料はGoogleDriveで公開しても良いでしょうし、SlideShareで公開しても良いでしょう。
SlideShareでは特定のテーマのイケてる他人の資料を検索して参考にするのにも重宝するかもしれません。
ソフトウェアの実装中に小さなコード片のテストをしたくなったならIdeoneを使うと便利です。
誰かにコード片を提示したい場合にはGistも良い選択肢でしょう。

もちろん、オフラインツールにもソフトウェア開発に有用なアプリケーションはたくさんあります。

- UML
    - [Umbrello UML Modeller](http://uml.sourceforge.net/)
    - [astah\* community](http://astah.change-vision.com/ja/product/astah-community.html)
- ソースコード自動整形
    - [Artistic Style](http://astyle.sourceforge.net/)
    - [UniversalIndentGUI](http://universalindent.sourceforge.net/)
- テキスト処理
    - [ack](http://beyondgrep.com/)
    - [msrp](http://msrp.github.io/)
- ドキュメント生成
    - [Doxygen](http://www.doxygen.jp/)

設計資料を作成するのにUMLは有用だし、コーディング規約に併せてソースコード自動整形ツールの設定をチームで共有しておけば何かと便利でしょう。
ある部分文字列を含んだファイルをファイルシステムから探し出したい時にはack、テキストやファイル名を変えたくなったらmsrpを知っているのといないのではコストに大きな差が出ます。

また、優れたテキストエディターは開発者の一生の良き戦友となる事でしょう。自分にあった優れたテキストエディターを早めに見つける事はとても良い事です。

- Text Editor
    - [Vim](http://www.vim.org/)
    - [SubLime](http://www.sublimetext.com/)
    - [Emacs](http://www.gnu.org/software/emacs/)
    - [gedit](http://projects.gnome.org/gedit/)
    - [kate](http://kate-editor.org/)

ウェブサーバーを確保できるならば以下のツールをホスティングしても良いでしょう。

- プロジェクトやバグの管理
    - [trac](http://trac.edgewall.org/)
    - [Redmine](http://redmine.jp/)
        - [ChiliProject](https://www.chiliproject.org/)
- 継続的インテグレーション
    - [Jenkins](http://jenkins-ci.org/)

簡単なチケット管理システムで十分であればGitHubのIssuesで済ませるのも良い方法ですが、tracやRedmineを本格的に運用すると様々な開発工程やバグの管理を強力にアシストしてくれます。

Travis、BuildHive、Jenkinsなどの継続的インテグレーションツールを上手くを活用できれば開発工程を大幅にコストダウンしたり、品質を向上するのに役立つでしょう。
これら継続的インテグレーションツールについて興味があれば下記を手始めに参考にすると良いでしょう。

- [マイナビ - Travis CIとBuildHive、オンラインCIサービスを活用しよう](http://news.mynavi.jp/column/ide/137/index.html)
- [@IT 継続的インテグレーションを始めるための基礎知識](http://www.atmarkit.co.jp/ait/articles/1302/13/news030.html)

## コーディング規約

一般にソフトウェア開発を行う際には、ソフトウェアのソースコードの記述方針や、ドキュメントでの送り仮名の方針など、プロジェクトの内部で統一すべき規約を用意します。

これが無いとメンバー間で括弧の位置や改行の位置やインデントが異なるソースコードや、部分によって送り仮名や漢字の使い方の異なる読み難いドキュメントが生成され、開発も保守も、ユーザーにも扱い難いシロモノができてしまいます。
普段の自分のスタイルとは異なるルールがプロジェクトチームで決定される事も十分にあり得ますが、決められた規約には従った方が自分を含めたみんなの為に良いでしょう。

規約の決め方は、初期の段階で予め一定のルールを話し合って決めて置き、必要に応じて徐々にプロジェクト内での統一規格を追加しても良いでしょう。
GitHubにはWiki機能もあるので、「コーディング規約」などのWikiページを作成して整理すると良いかもしれません。

以下は、実際にしばしば見られる基礎的なコーディング規約の例です。例示は特定の言語ではなく意図が通じる程度の擬似表現です。

- インデントの規約
    - 例: 2-space 4-space 1-tab など
- 命名の規則
    - 複数単語の結合の規約
        - snake\_case
        - camelCase
    - 省略の規約
        - 例: 行わない
            - bottom_button
        - 例: 母音と連続する子音の省略
            - btm_btn
    - 付加情報の規約
        - 例: クラスは _t 、インターフェースは _i を末尾に付ける
            - class bottom_button_t { ... }
            - interface button_i { ... }
        - 例: プライベートメンバーは _ を末尾に付ける
            - int position_ = 0;
        - 例: 翻訳時定数は大文字
            - constexpr int KOTAE = 42;

零からコーディング規約を作るのは大変なので、既存の規約を元にするのも良いでしょう。幾つか代表的なものを例示します。

- [google-styleguide ](https://code.google.com/p/google-styleguide/)
    - [Google C++ スタイルガイド 日本語版](http://www.textdrop.net/google-styleguide-ja/cppguide.xml)
- [オブラブ コーディング規約の会](http://objectclub.jp/community/codingstandard/)

プロジェクトのコーディング規約のWikiページに、これら既存のルールを明示した上で、但し書きで自分たちのプロジェクトの中ではこうするといった規約を箇条書きで追記して用いると良いでしょう。

## リポジトリーとバージョン管理システム

一般にソフトウェア開発において「リポジトリー」とは、開発に関するファイル一式を納めたディレクトリーを指します。

以下に内容物の例を示します。

- README
    - リポジトリーに関する簡単な覚え書きを記してあるテキストファイル
        - ソフトウェアの概要、簡単な使用法、原作者、貢献者、ライセンスなど
- ソースコード
    - 必須
- ドキュメンテーション
    - 取扱説明書
    - 仕様書
- ビルドされた成果物
    - ソースからビルドすれば良いだけなのでリポジトリー内部には含めない事もある

これらを1つのディレクトリーにまとめたそれをリポジトリーと言い、ローカルにあれ、どこかのサーバーに置かれた状態であれ、何れもリポジトリーです。

開発の進行に伴いリポジトリーの内容は徐々に完成に近づき、ユーザーからのバグ報告を基に修正を行うなどすれば内容に変化が生じます。
こうしたリポジトリーの変化を管理する仕組みをバージョン管理システムと呼びます。

太古の時代には、ディレクトリーを定期的に名前を変更して丸ごとコピーしたり、変更するファイルの末尾に数字を付けて変更を加えて保存するたびにインクリメントしたりしていた暗黒の時代がありました。

例えば、リポジトリー repos に対してそのまわりに

- repos-stable
- repos-stable.old
- repos-stable.old2

なんてディレクトリーが転がっていたり、それを圧縮したファイルが転がっていたり、或いはソースコードのファイル名が

- main.299.fla
- main.298.fla
- main.297.fla
- main.296.fla
- (略)

とかなっていたり、そんな時代がありました。

この時代はバックアップを開発者が手作業でここらへんと思ったタイミングで任意に、或いは一定時間を区切りに自動的にバックアップを作成していました。何かと効率が悪く、特には操作ミスで多くの時間を失ってしまう事もあります。

そこでリポジトリーの中にあるファイルの更新履歴を上手に保存でき、何かあればいつでも以前の状態を復元したり表示できたりする仕組みが発達しました。バージョン管理システム(VCS)です。

かくかくしかじかあって、少し前までは Subversion 、最近では Git が主流なツールとして利用されています。
他にも Mercurial 、 Bazaar 、 Darcs など幾つかのツールが使われています。

例えば Git であれば、リポジトリーに .git という隠しディレクトリーを作成して、その中にリポジトリーの内容がこれまでどう変化してきたを記録したり、記録された情報をもとに以前のある記録状態に戻したり、比較したりできます。
Subversionなら .svn という隠しディレクトリーでアレコレと情報を管理します。

GitやSubversionと言った近代的なVCSでは、複数の開発者がそれぞれの計算機のローカルにコピーしたリポジトリーのファイルと管理情報を上手く共有して同時に複数の開発者が円滑に、ソフトウェアを作成し易くする機能も搭載されています。

特にGitなどの比較的最近のVCSは分散型と呼ばれ、それ以前にSubversionで使われていた集中型に比べてとても柔軟に複数のリポジトリーを同期しながら並行して複数の開発者が同時に開発を進め易くなる様にさらなる進化を遂げています。

VCSを使う事は現代のソフトウェア開発では常識となっています。少々古い記事もありますが、参考になりそうな記事を幾つか掲載します。

- [devslog 低コストで少人数プロジェクトに最適なバージョン管理システムを探そう！](http://devslog.com/article/20111218200000.html)
- [MEGASOFT バージョン管理システム](http://www.megasoft.co.jp/mifes9/verkanri_1.html)
- [@IT 分散バージョン管理Git/Mercurial/Bazaar徹底比較](http://www.atmarkit.co.jp/ait/articles/0901/14/news133.html)

## Git

VCSの項で既に述べた様にGitは比較的新しい分散型のVCSの1つです。

初めてGitを使う場合、まずは計算機にGitを導入します。

GNU/Linuxを使っていれば、`apt-get install git`とか`pacman -S git`とか`zypper in git`とか`yum install git`とか`emerge git`とかすれば導入できるでしょう。
ディストリビューションのパッケージマネージャーに適した操作をしましょう。

OSXについては申し訳ありませんが実際のところよくわからないので[ググる](https://www.google.co.jp/search?q=OSX+GIT)などして解決して下さい。

Windowsでは[msysgit](https://code.google.com/p/msysgit/)を導入します。
以下の記事も参考になるかもしれません。

- [CodeZine - WindowsにGit環境をインストールする](http://codezine.jp/article/detail/7077)

なお、msysgitを導入する際は、特に理由が無ければインストーラーの"Select Components"では"Git Bash Here"と"Git GUI Here"をチェックONに、"Adjusting your PATH environment"では"Run Git and included Unix tools from the Windows Command Prompt"とするのが便利と思われます。
但し、特に後者の設定は赤文字で警告が出ている通り自己責任で注意して選択して下さい。

導入が済んだなら、使用できるか早速確認してみましょう。
シェル（Windowsでは"PowerShell"または"コマンドプロンプト"または"Git Bash"）で使ってみます。

    > git --version

正しくGitを導入できていれば導入したGitのバージョン情報が表示されます。

初めてGitを利用する計算機では次のコマンドでgitに関する基礎的な設定も済ませてしまうと良いでしょう。これらは1度だけ行なえば良い設定です。

    > git config --global user.name your_name
    > git config --global user.email your_email_address@example.com
    > git config --global push.default simple

続いて、早速リポジトリーをgitで管理してみましょう。
先ずはテスト用のリポジトリーとするディレクトリーを作成します。
どこに作成しても構いませんが、シェルでは`cd dir_name`でディレクトリーを移動できる事、`pwd`で現在の位置を表示できる事、`mkdir new_dir`でディレクトリーを作成できる事は念の為に書き添えておきます。

    > mkdir hoge
    > cd hoge
    > pwd

当然pwdの結果は各自で異なる可能性があります。
/tmpで試してみても良いし、~/hogeでも良いし、Windowsユーザーなら"C:\temp"とか"%HOME%\hoge"かもしれません。

さて、現在はシェルでリポジトリー（の練習のつもり）として作成した空っぽのディレクトリーの中に居ますね。
早速このディレクトリーをgitで管理する様にしてみましょう。
念の為、`ls -la`はディレクトリーにある全てのファイルを表示するコマンドである事を書き添えておきます。

    > git init
    > ls -la

gitにはこの様に"git gitコマンド名"を指示して使います。initは現在のディレクトリーに.gitを作りgitで管理する準備を整える為のコマンドです。

続いて、適当にテキストファイルでも作成してリポジトリーにgitで覚えさせてみましょう。
念の為、`echo`は文字列を標準出力へ出力するコマンド、`>`は直前の標準出力を直後のファイルへと上書きするリダイレクトというシェルの基本機能である事を書き添えておきます。

    > echo "hello, git" > hello.txt

もちろん、シェルに不慣れなら、pwdで確認したディレクトリーをコピーして各種デスクトップ環境に用意されたグラフィカルなファイルエクスプローラーで表示したり、テキストファイルの取り扱いはお好みのテキストエディターで行なっても構いません。

では、この hello.txt をgitの管理情報に追加してみましょう。

    > git add hello.txt
    > git status
    > git commit -m "hello!!"

addはこれから行う「コミット」にどのファイルを含めるかを指示するコマンド、statusはこれから行う「コミット」に現在セットされている内容を確認するコマンド、commitは現在準備していた変更内容を実際に.gitの中の管理情報に書き込む「コミット」を行うコマンドで、オプションの-mはコミット内容のひとことメモをコマンドラインから直接指定するオプションです。

こうして作業ごとにaddとcommitを行うのがgitの最も基本的な操作。hello.txtの内容を書き換えてみたり、別のファイルを作って、addとcommitを何度か繰り返してみましょう。

それから、

    > git log

これで現在居るリポジトリーでGitが保存している更新の情報を表示できます。

実際のところはこれにリモートリポジトリーの設定を加えるaddや、push、pull、fetfch、branch、tag、merge、rebase、もしかしたらreset、rm、mv、それに設定変更の際にはconfigなどのコマンドを使い、Gitとリポジトリーを上手く管理する事になります。

初めてGitを使う開発者の参考になりそうな記事を幾つか掲載します。

- [サルでもわかるGit入門〜バージョン管理を使いこなそう〜](http://www.backlog.jp/git-guide/intro/intro2_1.html)
- [いつやるの？Git入門](http://www.slideshare.net/matsukaz/git-17499005)
- [ぎっとぎとにしてやんよ](https://gist.github.com/teppeis/4117588)
- [Gitを使ってみよう](http://www.slideshare.net/tamotsufuruya/git-14116631)
- [こわくない Git](http://www.slideshare.net/kotas/git-15276118)
- [あなたの知らないGit](http://keijinsonyaban.blogspot.jp/2010/11/git-tips.html)
- [Git-助けて](http://rosylilly.hatenablog.com/entry/2012/05/05/231625)
- [LearnGitBranching](http://k.swd.cc/learnGitBranching-ja/)

リモートリポジトリーを必要とするチュートリアルやレクチャーは、次のGitHubの項を読みながらやっても良いだろうし、或いはそもそもGitのリモートリポジトリーは同じ計算機の別のディレクトリーでも立派なリモートリポジトリーである事を伝えておきます。

参考として、GNU/Linuxならgitkやtigを導入したり、Windowsならgit guiを試して見たり、Tortoise Gitを導入してみるのも良いでしょう。

## GitHub

- [GitHub](https://github.com/)

Gitを用いたソフトウェア開発、特にFLOSSの開発を促進するとても良い代表的なサービスがGitHub。FLOSSであれば基本的に無償でその恩恵を受けられる。

先ずはアカウントを登録しよう。GitHubへのアカウントの登録が済んだら、忘れずに[Gravater](https://ja.gravatar.com/)にもメールアドレスと自分らしいアイコンを登録して置こう。これは特にチーム開発においてメンバーを識別する為にとても役立ちます。
但し、誰かの著作権を侵害したり非常識なアイコンは設定しない事。

さて、アカウントの登録が済んだなら、早速GitHubにもGitのリポジトリーを作成して試してみたいですね。
でもその前に1つだけ、予めGitHubのアカウントにSSH公開鍵を登録しておくと以後の使い勝手で苦労しなくなります。

    > ssh-keygen

このコマンドはGitのコマンドではありませんが、GNU/LinuxやOSXを使っている場合はopensshを導入すれば導入されているでしょう。また、Windowsの人もmsysgitに付属していて使える状態のはずです。

この`ssh-keygen`を実行するとSSHを利用する為の公開鍵と秘密鍵のペアをファイルとして生成します。
メッセージが英語かもしれませんが、大した事は書いてないので必要なら[ALC](http://www.alc.co.jp/)先生など使ってきちんと読んで進めて下さい。
実際問題で言うと、デフォルト設定のまま進め、鍵を使うためのパスワードも無しに設定できるのでENTERを何度か押すだけで良いはずです。

続いて、[GitHubのアカウント設定のSSH Keys](https://github.com/settings/ssh)から"Add SSH Key"して先ほど生成した公開鍵を登録しましょう。id\_rsa.pubの中身をテキストエディターで開いてコピー、ウェブブラウザーで貼り付けするだけの簡単なお仕事です。

おめでとうございます。これであなたはGitHubを活用する権利を完全に得られた事でしょう。

ちなみに、GitHubを使う場合、OSXとWindowsのユーザーはそれぞれ"GitHub for Mac"と"GitHub for Windows"というGUIの専用ツールを使う事もできます。
多くの事はGitHubの公式ヘルプを先ず参照すると良いでしょう。

- [GitHub - Help](https://help.github.com/)

もし、あなたがこの資料を実際に @usagi の講座を受講して目にしているならば、ここで実際にGitHubにリポジトリーを作成してローカルで作成していたリポジトリーからpushしたり、既存の他人のリポジトリーをローカルに拾ってきたり、その他の機能についてのデモンストレーションを体験できるはずです。

不幸にもデモンストレーションを体験できなかった場合は以下の文書なども参考に、リポジトリーを作成するテストや、pushしたりcloneしたりを試しておくと良いかもしれません。

- [Qiita Git習得のためのGithub入門](http://qiita.com/items/4272209ad80380933000)
- [サポート GitHubの始め方(GitHub for Windows編)](https://github.com/NIFTYCloud-C4SA/support/wiki/%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88-GitHub%E3%81%AE%E5%A7%8B%E3%82%81%E6%96%B9%28GitHub-for-Windows%E7%B7%A8%29)

さて、GitHubにはリポジトリーごとに使える便利な機能が複数あります。Wiki、Issues、GitHub-pagesなど。
Wikiについては説明する必要は無いでしょう。
GitHub-pagesについてはある程度GitHubを使ったFLOSS開発に慣れ、成果物のプロモーションサイトが欲しくなった頃にキーワードとして思い出してあげて下さい。

Issuesについては少し解説します。GitHubのIssues機能はいわゆるバグトラッキングやチケット駆動開発を行うのに使用可能な必要最小限十分なだけのシステムです。
一人で開発を進めるソフトウェアでも勿論有効ですが、複数人で開発をする場合にはその恩恵も大きく感じられるかもしれません。

先ず、この仕組みに登場する用語を2つ解説します。

- Milestone
    - リポジトリー（≈プロジェクト）における「小目標」を設定します
    - タイトル、内容、納期を設定できます
- Issue
    - リポジトリー（≈プロジェクト）における「個別具体的な課題」を管理します
        - 実装課題
        - 解決すべきバグの課題
        - その他のあらゆる取り組まねばならない課題
            - プレゼン資料を作成する
            - 要件定義を行う
            - ユーザーマニュアルを作成する
            - etc.

このシステムにMilestoneと分かっている限りありったけの課題を個別にIssueとして登録し、Issueごとに担当者とマイルストーンを割り当て、進捗を報告したり相談したりしながら課題を解決（クローズ）する事でプロジェクトを進めます。

この様なIssueは一般にチケットとも呼ばれ、GitHubのIssuesの様なシステムはチケット管理システムと呼ばれる事もあります。
また、チケット管理システムを用いて、チケットに基づいて逐次開発を進める開発フローをチケット駆動開発と呼ぶ事もあります。

ウォータフォール型であれスパイラルであれテスト駆動であれ、何れのフローとも併用できるので、それぞれ大枠の開発フローに併せて適切に利用する事で、開発工程の管理がとても楽になります。
それに、取組の状況や残りの仕事が分かりやすくなる事は開発のモチベーション向上・維持にも貢献してくれます。

また、開発者以外でもこのチケットの登録はできるので、バグを見つけたユーザーや、新バージョンでの追加機能の要望を思いついたユーザーからの報告窓口としても機能します。

チケットシステムを上手く使い熟す事はモダンなソフトウェア開発の現場では日常的に行われるようになっています。活用経験を身に着けて置きましょう。

もし、GitHubのIssues機能では不便や不足を感じる場合には、tracやredmineなどの設置と使用を検討してみると良いでしょう。

## チーム開発

チーム開発を行う場合、必ず必要となるのがファイルや状況の共有です。GitHubとGitによりその多くを上手く解決できますし、必要ならばGoogleDrive、Dropbox、Cacoo、etc.、先にも紹介したツールを使い熟せば特に困る事は無いでしょう。

ここではチーム開発を行う際の特に初動について、より具体的に解説します。参考として下さい。

具体的な手順としては以下の様になるでしょう。

1. 開発チームを編成
    - 実務的な指揮権を持つプロジェクト・マネージャー(PM)を一人決める
        - 参考: [IT PRO - プロジェクトマネジメント入門](http://itpro.nikkeibp.co.jp/article/COLUMN/20070418/268752/)
        - PM以外はメンバーに特定の役職や役割を振らない事
            - ダメな例: ｘｘさんはお絵かき担当、ｘｘさんはプログラム担当
        - 先生は全てのプロジェクトにディレクターとして参加します
1. GitHubにプロジェクトを作成
    - 前提としてメンバーは全員GitHubのアカウントを取得済みである事
    - PMが
        - [Organization](https://github.com/settings/organizations)で開発チームをGitHubに登録
        - Teamsからメンバー全員と先生(usagi)のアカウントを登録
        - [Create a new repo](https://github.com/new)でプロジェクトを作成
            - このときOwnerは作成したチームにして作成する
1. GitHubのIssuesにこれから行うべき行動とマイルストーンを登録
    - Milestoneはプロジェクトの小目標
        - 例えば最初は「製作会議 1」として、企画決定、要件定義、初期設計、仕様書策定などを内容として挙げるなど
        - Milestoneには必ずDue Date、即ち納期を割り当てる
    - IssueはMilestone達成に向けて個別具体的に解決すべき課題
        - 作成したIssueには必ずMilestoneを割り当てる
        - 担当者は割り当てない状態で作成しても構わない
            - Issueは対応可能なメンバーは基本的に誰でも何時でも自らをasignして、その内容に取り組んで良い
            - 誰かにasignされたIssueの中ではasignされたメンバーが責任者として取り組む（困った時には当然チーム内に助けを求めて助け合う）
        - PMはMilestoneとIssueを定期的（≈各コマ毎）に確認してプロジェクトの進捗状況を常に把握し、必要と判断すればメンバーをIssueに割り当てて「ヤッテネ」と急かしたり、停滞しているIssueを見つけたら適当なメンバーが手助けできるようにコーディネートするなどして円滑に開発を進める
        - Issueについてオフライン、ML、チャットツール等で議論を行なっても良いが、議論結果は必ずIssueに速やかに報告する
1. 課題を選んで企画会議を行う
    - 議事録・ラフスケッチなど資料を残しながら行う事
1. 企画内容から要件を整理する
    - 箇条書き、マインドマップ風、etc.
1. コーディング規約を設定する
    - 設計前にしておかないと命名規則がばらけるなどが生じるので早めに行う
1. ソフトウェア・意匠を設計
    - 機能や画面遷移を整理
1. 仕様書に要件・設計を整理
    - ER図、クラス図、画面遷移図、etc.
1. 仕様書に基づいて実装課題をIssuesに登録
1. Issuesごとにチームメンバーそれぞれが開発を進める
    - 実装完了した機能からPull-requestしてチームの他のメンバーがレビューしてmasterにmerge
    - GitHub-flow を採用すると良い
1. 納期目標までに全てのチケットを消化し開発を完了する
    - Issueの消化状況に応じて一部Issueを先送りしたり、担当者をアサインしてせかしたり、メンバーの開発状況を把握・確認したり、MilestoneやIssueを調整したり、うまいこと完了できるようにします。
    - 納期に余裕があればリファクタリング、新機能の開発とバージョンアップ、ユーザーマニュアルの整備など有意義に使うと良いでしょう。但しすべてIssuesで管理して行動すること

## GitHub-flow

GitHubを用いてチーム開発を行う際の具体的な手法の1つとしてGitHub-flowがあります。
下記資料が具体的かつ簡潔で分かりやすいと思われるので、これを用いて解説すします。

- GitHub flow
    - [githubを使っての開発(1) -実践github-flow-](http://pplace.jp/2013/04/1437/)

## RAEDME

最後にリポジトリーに忘れてはならない存在としてREADMEについて解説します。

一般にソフトウェアリポジトリーには"README"であるとか"README.txt"、"README.md"などのプレーンテキストで書かれた比較的小さな簡易説明書が同梱されています。

READMEにはソフトウェアの名称、目的、簡単な使い方、原作者は誰か、どのような外部ライブラリーを使っていてそれはどのようなライセンスか、このソフトウェア自体のライセンスはどのようであるか、そうした情報をできるだけ簡潔かつ分かりやすく記述します。

もし、GitHubにpushしたリポジトリーにREADMEまたはREADME.mdなどのファイルが含まれていれば、GitHubではそれを自動的に表示してくれる機能もあります。

プロジェクトの初動で、とりあえずは空っぽでも、或いはタイトル（仮）くらいしか書かれていない状態でも、忘れないようにREADMEファイルは用意しておくと良いでしょう。

ちなみに、.mdとはMarkdown形式のファイルにしばしば用いられる拡張子です。MarkdownのGitHubでの活用については下記の記事が参考になるかもしれません。

- [ゆっくりと… 脱GitHub初心者を目指す人のREADMEマークダウン使いこなし術](http://tokkono.cute.coocan.jp/blog/slow/index.php/programming/markdown-skills-for-github-beginners/)

参考として、GitHubではWikiでもMilestoneでもIssueでもあちらこちらで実はこのMarkdown記法に対応しています。活用して見て下さい。

----

Copyright &copy; 2013 Usagi Ito.
License: [GNU FDL-1.3](http://www.gnu.org/licenses/fdl-1.3.html)

